<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"4ce480a5b4682f07b96a387b23c991092f42f634123604f9644cccbf3e1754173856d889482b39ac7715d0dc581383fd004cafa691266316a4c40d78c919ea105ff1da6ce6172f153d7bb77783409d08b9fc356e2e8daa9c885e177b130e2f2d8ba3244c1afd6bfc61f5e8a8a4ce5659f0fb4511e8fecaf75df551204265706b5b99d29c24299615f13f624f7c18c83c1fa64142dd43adc7244270c1b8016a7a25f4a6fdbdaeb149d7e8ccfb3bad6497fc0a2958523f4f28af7ee108f405d36e776e626af0558133720cc793909e5f6fc4efb949776c4563dc913d3dea9943067b438fe4f936a4fe394680dda542f75fc538b69244834fdc633aef2dd9aa2f74ea7c0ac1f5a3c4ff407f32f8cdaa9bbd27f7a5ad25f807315d4ba0938e0b48af9910b02b5d7b5f7224dd4112cc0c51b28778afed77a8f9ae74db3b440c36a72a6580bb3c01f34eb9b637b5e9e549460e11d200992b09a1406d945da2879f64d53de9e74afc0e39d6766e55099d6bfeef36e6bdf1e5904526a13712b3d8aebe701780d7b48d7621801c5c1addbb063a7330bb72e12ad5fb826ff3c59925441d993942e6b86debd1641934a1ffd80e80a19e314897e3f14ff275a88142d702cf9f088d4f7a3fc1b8f42b5958c98dfac0b623ed9cd28f47707aa6e0e33e9de1a4b0ec2c8ee0143c7faf5e3fbf4ebafc456405c465802e684a61cd1d49ae56d3bd4de9299ffd591371ee413ee5073c0cb5cd019716733b47c5ef9c1a203a5ded06e3c9e57c7ab9eb3b89c4cd74feca2277e1fe83987a3d7e69aac6bd3a6ae0aabb4f90aa573cf3828842e806018e670884f863bd2af9eb3a751a65d0861c6073f0216cec3b09bd334c71bb5b7f796dee2f964491884bb8c3e0344c4836925f9f188df56c3b5897864d183265b29bd9ded7940a69479e64c9fcaeb7c872cbfc71e42f521fa5f65bce9bdbc5a97ab491226a5cadab67b7f9e3d2c497422e2f339392ce366965d1f67b005bde3b13dbc9c8434e2794fe702ddcadfb9fd3faab45070589e9b2756733ee8a110b1e8b64b33b82acffe3cd4cdc017f271f7f4b2e8e4f919bf7027d8aac8f789b0775bd0c392517cf34ee8beec8f8101b9c1fe1289c2a93339307d2a94dab97640df0c7763bdebfde20a00f990e83e8533b7712eb3123bcfc04ba7c296fddafc97f0e79601c1e3064eda05091f7414789ff92fdb9bd15d876e47e260130035c3e5edd39ea79032bf3d1f147cd363011ae4af9b1e0155cb76b3b299a5196298396d089b061c71cd839fa4640ef2189fee2df844453ea85d9d68a0c3b5cdff67af0713aff6d1b82ff5dacce47dbbcd375a9285dd7737b039e12c72a492d9076d83fb9a0e74686710000a8b1ad06407ee2c5da8d89dbfe8535088c25753806dd7ee8312adcbad8722fdd1fcdd8764b63b4f5caf133f8abb21840c70f7cd73a85745a87f7d7dc20d257b09003a9af1ebe1dabe4147abff4a7a72a2e6222dccff3846e11202eeb2a1297a6eac53d7fc73fbcc21a93baf66a7e0325c37f7a371914023762e8c4583aa434c7226647f515fd750f1af33990835dc743e9863b702cd1a1e28d5e98dbf395ea77dece0226f8462307aae5c73e4fc9c14028f6d0a97dc226700b8d23493c93db1d831d6efffd0368cd055707e3907735739848e997f226c205434fe8d24335059791a9341da182bac3e683e0fe889aad7072e1c65849bd411428781f0d38b369c00b650ac39cc7e94a7e1d254d57568ea8210f478cd7afddee791863b1f39f974cc42238d0b3c2f3b16397a0d07a8978880b1a5c95435bef30fbf8a45056bc7a34d979d219e5221535e54ec38239dba3223f4fab2fc9b79107ea092495d8133f7a7b7bf9fbb4edaea7425049165bd23063f44eeb70cd7567df28d55d35bfc706a2854d3aeead2e7085278c99db217c3f984cfce2804a9d9f6920322bf52867bfef4ed0de355082759c3f7cf6fa5eeb0040f215879cd4b93a78d0f38b9323a719260e17da6f9a4ce78b6a5ff1ac8358eab170380b06a85a1175fa8455725f468515f924553f21a29b229fb7135f6da931a25929d8524f628737f824cd3f28e0a2b80b67391c1dea8a06c2ad6a881c55dad425cbcdd2cf2c08a2f6f39aa9e460431478a1fe8bde0fcf4f3a4ac7b7798ec2debd698222a4f8ebce27bacf979b927f024863551545d04a5e7b8f6adfb94b23add4cc3c6ad9a44686b4d5b33814aca380b75a0649db6d5908665a00296ece615b6f03aa70ec77ddf59138aa517e1331bcce0f26cb921aebbf038bf461446b9822e0646014afde9d0a00555fe9cf87ba9949610aa800ba21d645dbfe3a1378afd7b2747054f01580abf88d07a2a52c7e15de575b520e4edc0e931d69239db3f9dcd2672bb93ecfd0c6ea8fbaff6d2bd5267672967c32225b10ebe4c2c0ecaee1fda4227864e43958c5b9eba32994a68d9f4bf57931689f16127b1d3821113d2d05bdc99f5e9a1dc773dc75d8d2c9a926b62719d64705ab510608ab4c02ac9fe693bf815046b0c7a655ecc47be734db2be39666d6368841bac85726519f8bf8853d67c45fbc7b11242ff74478c8d0eec2eeddb49efbbae0e34fb3fb04d8b1f885d5b6d998db9f6e73d7f2074288927abdb3c5525855aad7b62dfedef6949e211a515fbd81156c8c41e6a82c9ac01ef692e368bc5bee3b1d912d72e09f0815e2fc692e65fb9627464b0e9de305f15ab1bd5331fa89a738fa56f564210b230286c565ae615d9b99a5d0b5312c3264a3c75b1652a62faf909aedad2892f986e956b655f7b212d7a7a314a0cfd9e32dffeaac78fb467c1f5c485250145a8930e94f980ed32ab417c11f46cad98768eb5ace28914f035f7492bb2ed019beba2b77252a9cc13a5627dbdbdebe976202da080c86b3d3fb7f0b9d121c36ccf7953f77f0bb200a3445136a11370f20d5820bc6d5b193592bc63af07094cb7fa07912c6deb13d04f4d20fdaf7a02ae834da0346e6f35b2fff46eb73cfb22c725ce047151ef6a05ebfe2eb04ab67475e313b104dfee74627c8ed01c8dfd8fdff416e4b088d26fa71f77b39b5494ef30e90dfac3e39acc5b08862cd86f90ed77e4016f26f6783f5a011bbc5f3f651902adcd96704c7d3ea4864ec8c412721d822f2c18de24659f9774e4fadd7800081ddc505133819cc18573df3b2908ce33d0007819836ae9de404aef9bc9fd1416398d4b1d4e56035aa6d1d2e1af954a37c911aa5bb454a38eb2078b01faee599a38aaea0ae5d7194ca3cbf38c53b81a009a73da275bd7e837b0d592703fe4a6dd11556cb989c1238ec5645702c7e3158664562955a90e18ccc767e087a6e90dcb6b351453feb67df32bf300eec3c67201de310ada7ffaf69e60243fa5e62dd2ff428a87360a41de3add5dd451a5720c662a552f3d5c5adff3768d43658be1b6bd32ffc85990c881a0e88b360e49b41484c872bdb1d20977973ad48a2982322ec372aee89ba0de87d32f3d913a08506d00a4566cc754dd6e38d4a529ce8d6ccc7e3690dd7406628bae6583207ade63ffac5f101744610462a7ae389bbaea52368041e6f2b536a5889a8484e5b863b744709dc8fafe3343de2fb67192870bd05f5723abd3eac125dc13db4d8f3c6cda0c04162acbd8efc5dd4f08a774be4260381684f16434f7b3bc5a8f4138213de9de0334b8cc95ce96aecbee275d7f76db5f4ef6b9da56b76cb976c5ba476a28d8b24d08682966288a18ea19ec6a031eda3b1b06fdf012c3c6108650e8f577ee8126c930b572329ed085f013390ef0a55b81345374b86508fa7e9c00c75d9d1e2c750887c317e24bd750d739c3b4f72c988bc24a8f964ca1a5cc1afc7768529feff6282953f570e121e29d44a45750567183a72ed7e971ea438f8c1c9e74f31b49a496dd45b1dcfa6daa62a4d2e5e893aa23b4bfd473e8ea5dcdbcb8505683fce92ac1afb91ba5b0f4d3d67bc72aa8a190b22711916efc9aceada3c34d191b0b44b175afc4c82b9cf0878d92752f2804c6dcf1ee420eb35612c074f97553588b34b6f41b7320929dc2bc76a492286bb4f974990191168722db17b8c7eb68cfcfc41bfa5a89086a9fb86d7e152fab189fb437635ab879f39f711fd23a28a4a0395a8f55f936f91565304f4109295b5cee320e85769f95348137b2d7865d7d6b11df350293d09b48ab74e1a76be743fa9e7a305a4e9bcaf2782cd61afb85e42281fbbbd4ac35172ed383530e4090c4d14582111cf84789d7596f846e8935b4838037f95ee6ac801cd3c204b7172220f989434de84fe9d33bf28de57bbef651cb268792f3f7f538af5eb86210fc390919335ea09f425f82072239b3101ffae1a640c9cb1fa368392fe7caa4c607a6d409019654f702e91df0e2637389488952207b90a4e31eef4e4821ad27e476cf3cd9c36752c18c2d04b02564792bd5ca74c822003f18e6333ad4c24ba2a5c41b79ee3e4d37095f678d7cb488eae6a02676addc5fc44007915e8d8fe43becfdd373c7f158720cb5a4ac1afff40bf71c53d078f2d9c5fb6cf18c6dbbf9263a540d457ecb539052ae29e3f863ef5e9a3b7f1a28cc50e96d5e9fa4f5f238ff1a527ad6680db7c683e28029a80bbb5217ded74e4584bfac6fd978020244d46d2153453c22218773e1d981fe97f322a9ab8adde78c7cc4ebc040b4b2aa1a490f105bc8a5755ad90b72c73cb2f3935622989e5eb84fe6bae809572a342da191c286e6e1f8c32bd2c5f69f4c77036ee4f48f4789388b8c6e2bf9b0fddece15785a46b838827d343fe96738a9d5f9892e6434f34e3052e52aa054f4c46bc78446d9a0c5bdc607687f36823e4805d3f4206339482b87893abe40e1c609451fe64027dcd4f5bac8c82bbc99b567f84eb647e5bc041d7fbdd17188c3a72bb0676afd3afdde2c580fe7e6f720d636a42b539cfb612d3e5ab3bcb36ebeae4ddc5f63b8fcf8caf7977f7f3d5ce96349fd97e8fd7103ebf7ddc5dc41d9c7e839dceb7f25e918d8beb534ac1091d6f77f86704ad6a8b7c14d49e1b31c15221415aeb87cb420b4a1733325637e60ab8c444bcf16be46a66a7c3fa7b5d5e839c1ca195edaf56390585ccf7829800583d5c809e5d70c9b80a883ae03bb9d0d7c1d183b04d6dbdef72c0f2e5c42e78b4a86af312f8c334ee42ad43ef408a972fe7d315603f29a485b8201fd91d7fe782830f48b0061f6ef6db84202d9375778c33f032bdf1190c0df52e8259406762f52f3a07ed7c7d5de6b7e6b96e8c6d019ee64b14360caab0bf9b8335d887d8a66742261b88d0e7979fcecb104047e1cf49af32e687af766c443acf34377b622863c0deae2bdc5e57e512efb2a00a1f3b955db565bb218b89ad04d4d83b13bbc986c46c67509c2935efa50ef0d48011b61a223dd9b28705b6fe9a415b0b152f27718bb1857e6d274f95ce05a9f9aafb21bcf45e6b73466ca1c75d83fc1c99989a1f6dd530888fe3484f2c1f4f8ba472b4e6f413e7b6b10bef68458728e3aa82cf84648d9417fb247a1532ad0599745da7dd13743365eda42b12ccdda361cdc6f1c5b744212b74105965ef77ab027c1d47dd7a525abd1cd50d69b73c490a6d754b95eb4a260a4b610d261bf1e0d782a4aa045b57be8e56a979f075072c7f98d709b1b03879bef42c5067fc6049d30220c9d7f24358323aa5d72f4e5b1bf9b9afe3ca50f5e843649830aca45dae0cf461f92014563765b769f2ee8aa806d5b7e41a637d7239e0eb633a862d68bcbc11371a535e01ef4eb27ca9f8383b64a67bfca11efa9fb4599fa9eef56c5480a11c413e814762a81c1fd1cae9a519d1daf9433710b097cbbc53a23dc73b7347068fe05cf28ad9542eb8ccaae81e9e02291630ff7b1129d6435f675e13e2a392eaf7d23ac173de6a7e78709a6da29f4c9ccf49e7d50d06fecc7b6d78c3d9375deff9b80ec1f6b325ad76c2550a37aff07004c8b32931166b9ea742dd17cd789e1c0d962d1c1f649e8060800fe78b4656109251a8a2da64bb8944402efa801586227cc517a79435351302b153ad23fdf40deff464056ad43692052ced84ed8fa102179087bc09fc68402ef03520d9dd7a320f6bd20aacd78b214b3000924bc7c89d7290dab142b9ebcd31beb13c801de57ae25624f9e28f042fec0ca13f7d35ba48524b89786d727a0609fe128f5185660e64a09ee98f385dd492e7bd2ee77930b9641b62c7eb5f87a4601b7800a73fb530ca836821da9fb0a531dcd1601f7ae661476208441c42d2ff7312806e8a8d09b684db6edf43413af90f71f0f01a91d9adf4d0e2814c110fe7f77282aa74f4e2cfe0b0b61aa94f13184ecfbfd9ee462252ab4a83d247ce4572828481fa3bff1bffb1926e6a85944fa8db1eb8f8ea1dc2f4bbe024e01185c73d11fcd34aa5c5c3ab0d00ec54861a7735b6f8a76dc09dbaf4350210a7ab37ea2d3484aad4b7ae86e58759939258a7972f790da27c2decc5893f1fdcc32315778f6e570a5f45382d8baa403e027b1a2ae6cf3e96a24bb1a7dd95a0befe1b192a0a089378e56a735d25566420de9ddd1bc27f8e8e086e7ef831195cb9e21cd92d9755974154320dd83a2e6e2de8f0ba8e6e499ff8f6d9e7f4fc531e2d8954e6e088041308689a5fdf60a7248cda216a71d1340168023c349bda337f4219eeb5282f8478277f9fd84d15bbe95e0a7db3c259a04ee447fe79264598a464443ce1b3f465c669270ac8ba4125211da89aa9f8d2af367906b1aa44aded26784554b40729fc5206b8d97bd265da3088b251b8207131583a5b4134548190309d2c235c6b5ba6050ba48634110ff30da26aed0ce66095a706d0295aeca55f407091dc88033a51cbb59f19384b72a58b4f7b75736eafc39d4e1935040ac3d439c32f7f9817cb4dcf5a69f0340cf77e046046f11b30df28be96272789b0243ea68d37743d4e4a88777af39b11097ea86756d48a288b50a99737030fb7166b5bdb567a75c5553bcea88ffa24a42d28c2be2832d295dea79945bf3babe8898e55dda3c9b6e208c0aa65f5c39fe16e99ae379163ce40a74e2d8bdcb9829b8b35b3559df6617522b8657b440e43db89e1960daa786dda3d42ecf9c7aa8ef6cb7c33a62ee2445c3fbe80bba0baa337a0e62549f7b35f1448a2f05aca450d1bf7bf4f431143e692932b15464c4a0d707f8a02acee00787225e31ac10f8a21b54026c27032e293e2c28c12393d6bb282104db3b3edaa5b8a5d78ed745df5b3bc15973176c4ac124097f410f6d01a49d9255195338003d3391ce4a817df2ccd137c0fbdf0f18c243d5f1653e178b602c85cab093702a755bdaf22de41b2de609b69ef93cadd4b386b2fb9ce4946461690f438e57a94f6eecb8fd345996eb0b3df6ee0ebb34e4d13fe498caf5ff1c34d4faf0a07e199971e5e14d011a713b67dcc9afe14e13b1363d9706cd32ed2e04f3f56b9f9503a6dc1f6c6b5851cd2f5c405a8496b379ac074350b719b22d67bcabfd2b3af19d4380e8522decfbf7b0e451c80a48dbcc35c1a1c9726da039241dba83b70724ddda2ffb1a9e848031ec39d9d32bac26eac8af644dd6e206540df5cda218c526aa5a52d00929a3bcc522492519f36e9a934ae19b133974f480fdba55e0274c54be9810239d52915350c83276a4a05d18aacf51f20c11f664eed9549919d572d51adb9c72453c4937b3034f60169c05a18d66e318090f02bab48e29d81808e52bf3d722232d7c46a7601934d8ff27ab7587de87d11e058fd00f443c62b30d22e8342244f1c9e1b6e00b6e37e0300fa71209ce117e9e6993433ed220cbf66d5298b7eb70188915386c35c602193c3fc823cd706152a44f8048d9a5ecf7b8adab876541e47ccbafd14d98429f3d3704bec2f0b8b3549b9f937b246cdaabe09e7367b05415e5762811e2230d29227b4001243df8bdf49bec570c5052085fc4cfe748bbf286321180403043de18d57bf3b7f405b13299e9e684503aedcb1c389fa95afbf6d5e401185decbcec1bc123c3f0135612e295535480e50ab81f69df52637fcd41d4bf601aa8a20426d953d37f52642204920e49a7eb89bc05f5c632f93650b23e230d64961a0b8e9cf09fc16a9d02d47b04da838bd398552803b5404433aa18afe22d55797cf7ff5723d7bdfe33afd67baa00fd9f677faf58c973c026602f063335e7b319cf420a9b95445f2cbebd321af89b6ee217a5d458f3dfea12f5740815675e2c2b9a40a640895445f66519ec0c0dee0899132924c1562461dbf4f7d7928712833efca30f233b2b4deb52fedaaf29f014dbf231c6bf40435265ac1bed5fd068fc5f08c241d34ae6a2fb9b642f175f108ba1c0020d68385c9459869d85f0252318d75356fb734cbe717532349611a6cdf44ae74cd4c7331399873b019c353805d0198edc037c19dbbea5d35a5f4b88f760628a20428ee283425d75ba75cfe338a7aebb58c82ecbb8603aaa211d508ac801b56e4eaf743241a6f7175ce9c532a4032ecd1013d6dd993533290fe8ddbea7d01522cc8fc142fbd59306bb68e715418cbdaee2db860c63534dd4710fe9ea9c012d7078c772aef5d037b6017a0deee9e701045dc8f06d296bef9e514a4f49dbd92cd75dbdeb82b1603b81148a8777906c13817a8b9ff23d0283e8899b2ba2d5e46b12c10cd64efee64e06b7b919d997eb1753331f98ca0bd97ecafa8f6728c788cec3c4077dd2b28bde05129e8d8f8f3c7680a22258e802e21757f30b0dd13ee21300c15df226b86892183025ae90ab4573e6d34fb094026636366ce521be59be7302dd32340648d6c0f99980b4a05279d06775841f6515ed92d099f18e493d11d64946ddbc446e14320bb71520977f5c3897590144350190afefd75e9881b0d359b52deb6c1b44dcb8b3e43663ae328256e981875891515c1cb09e970312b6019fac28d13deaa875a14dd36c5ed515630f258b255fc677d4f315de4a994c081c7403603794a8c5e6c03986f85c82704a3bf665262080e6f9109a14d0ac1a0581be2957969c1a0c3d01b5c738200b8c35da8469177f633a66ffa4ee7f844dfd3f467c0210655e22b4326e358e90877464b4f0ce38543a243156ce190498ac57d0c7ba9ac4cf6c2468307b82ccbaf020a56f110fffc4bbd2868d0e63831e449fafcd0a701dcc00ed9306eb47f6f90642a2286e336a5dfd74de1b40884c43e5ca79b8c2c200901bdbeba94cbe462f92b87e681514bc849b9c33738969ee3fe4f7e90c4b9f34db7e7e33ae94ddff1fc6c5d4ede987b59f6fd641b8cc0d3e8c5eee26b04d82e641f4c07b1efb255b68669f6ea72d789c285e359236cb73e4210a415a106485363a9666dacef8c89ccfc0432d62de01ec0fae90d2c426f674e6f3d19c6224e70e627984d0fa24ecb7153920b091091ec987b5f02a319c7c1c0bbb1b8f025bca04ba9e61a3fbe7c4dde7cf21ad147677579db8106bc59fa6854084ad297c481c86153ab55762f21d403f0d4262ef525014a2ab45e85fbe6fffe292ab23b3bc42a01ae0cfd60bec50b61d362f8d40acaf7fddb2f3605802b4508b7f707a0a889f8926bf49dc9cf296074abb85d30c627643041f78d87d0381d9c1e954f4d1aa4575f59ba1dcaafe6f8338cdea4ba420df9392a03786b972ea5dbc90f403ef9747dccd81519aca5f663050d9ea4b5a275bff77b0f24c5ae733f74bdff0e3e4d626aec30157d871e1c4160477e6bac51bcf68334eb9cfdac67be5a1fd25daa176c4459a9632bcd92c89df746532d6d7172946b1ac01370028a5f0402c8383fa53f0211f6aa628bbe7d1dbf348bd27a41d8e2535f1eb43f0f715147fe89feb7bea1902140b592e9505a71a1e0397bf9f66de625ef8cc159f67f3f2f99ae4eeebc01add829d00a78439e621fef67bed758f5caba3a795c4ac3f5ec516707e7190d90e257e370112d7ce3a243c84c9df4051ea8c1497f29c19a8758035d43a757854d53d2f0b7a0d6ff43590af5d9f7406d221329bbed2fb0989ef35399dd0c86abdfa8209507c6f648b9ec3cfdc17b174ab68d60fa8c57b45036cd31bbf8931b943cc213139e1545e247c799aa49d32afcd7116c61cbcd5007a051be480499ebbc8ad13adbf4d5b18ae8c864c454be161889fc7ee2486eb14049d78427f2fc3d12afeb9e971fc4bb709f4f48f95c5ffef76308c1ac3e3d1142ac251b76a74e873e09542a83b851b8ae50e4ab77b7ce86906ebc4f81161463cc2b37093b63c5bf61fb91960d7e4188aecd2030c63671e3e20242134d52fed386fc6988dba4e6d7749f28fa2db835afc7d0f5b5e50f525cfa7c04e8d9b6e479ddae07fbd7955bed5e24b26a6750d43c5398b59ebb3dfe96b2d44a7fbb85ab8208f1d8c625f9d2c7eab4f8abf8f09f8ec645677a54f6080cde362ff0aad370b0101d1a04a06b26427d55cf6c3ab727392f3585d900f821affa1f06883b35f76abddf9d010e3dcb922f392b89010d69bf9242bb83ca84496422d3c57ffc514f890cc53ef4f9c82960c7ff00e3c85b8fa2c29a4225b46e8be62594fae575a67aee46b2273f770c43a8f43a0eedf3f24c839a66b03ddbaec6666126df71f470b0850b769ce26f72ef58f81bfffbe37d70d732116320bc19a89223a22b18fe047be4d90c83d388b8c2c60f0be3fa634666886a00e4d60c269f26dc47b57ca738c3683b123582e3f9cf7b90356d8fa5818fc0b95944160d7a6a6f4dbf673e194f404863572d4026fb3512f500a7f123fbe57233032d07324688a79509d1e07f046e2da173578f6a2099e9f66a0e42a80f3fe94ece721cfc64335da7a957215287f0457214a96dbef3b43401e964cebb9d9c02293b188bb7be62f93286a316551b3b6e010d2a944d71bb1147923d5fb1dbfd1e3ec68010f4f2e57afb23e0d468857d33661455b8af4dcebf08ac4a9bfb3e8ffcaf6c85ffaed2b507262100ed45b7ddb9c6271a207fc2e0e4c20a8e8314e067f3deb91064880d1c33f95e69d1f67d2694b4103066b69f7daae9e9d17c27eddcbf67eef887b6d864b800946691f9cfe19e953d0736790b8df5d284f4b39e024ee32ca105bf9bf34248b800696516e3ca75781e5fbffa6f22bc84660218ad4350a0c976c8d201f0607fb7007315277a9ed857148baee89dcafae23a2c2486a0249456e6fa6d74877fd8d3fc33d3a35fc852349283d5fa45db522e5e0eb3146ae823f901014cdd51fd983865a31fd9f036759b2aaceaf3db497ede2d2c845cd9c6d9312cafc6c2c17ab40f4807520dafafd73fb8d5d182ce8e3b2b91affcdf1b55671499d6587f01fc7341fc9227e8c92b01e53fb199b618ecae9b4711dead9038b2b5c12544c04bb4bd0e57967508eb3c7f55cbe51c107905665d7e44e9b8a067860c932c142843dcecaddd48c1b99e497169e407c10674656771336dfef3af52a9acc3bc0582a233c8e75568507e0fd0e0c3cd766fbfe71a004f4b184099fc0028ccec8087afab1af503d0e3e9e5b1890726cda0f4f788c44bf608bd679e9c8f48d9dd70a26a3aef5355fb8be573f1ead81767405fdf78fef21f8e4e4c97bcff67762ee4e3e85c10aa21caf557d5fb7891265828d37b1656c993297751faac1ba6be971037abace24e83556538768ccd6adfc323b3b53fbcafac57d83ad03ec739a663bc02a1188701808a2ce0eb135f82775ad8cf3ead7576c5149eaa9d44572d1d0a0ecedd2465b718a4ae5048fb587aaaa5b21a9b4135285769b9df6aaf202453724b679d118fa24d5ce65867ea30a9f582154f2165da7673216b75a0101353360ac33ce9b8a2622dc7ad8bc589df25ad4cdd62d0f91723533701ddb702e848001f74ce583b3a69beb3b20f39f3d54fc256a19b825f9e8ae60f23c32caf337106f509ea0d3e678ef24e475bf241863631ec853d6af9f98495e2dd8863119d7fdcb54f18587cbe6ab134df03470062ab7f07b9c0fb80e4165f0ebaea74b703afd2426713759c71ba0ce9fcd434cecb95f63b99d48cc58b59198856be467b5e5ed044c0350f1389414e5070d0d4cce1481baa003066f94f4cc934056c89696818ff4b263d05dd1af8900a598f9e22c642873c112eb34229bda4eac21e628d7f4a58187b71563980204a3a6d7a0a7ffba4b623aef1492c0c9ad2f1943cd9c20f9a7eb782c4e4a505987b62db7d1ce81c78affee93304361bb2137189dcef36fec619046e7a93c68c2611f8a6c51822a10bee473add651c2873a8fd3a4666eff145a703c309769952cc48644ef37076e220d2e39078bc3fc0cea73c77e6de4873409a2fe4add9c01e7317f71bb3c5cbd71c52fde167adefbd02006e1ad63dcef92cf00f777a1cb5521676dc33b1acb340fa58c17f5ac9c8eb5c139fdc62346494ed0346c2a7b19f1a89b29611f36b44ec78e1a0b3a4240faf1443ce935f1cd26d240a4238840285807465cb05843aeb03ecbc00293483901b27a76a6ebe0b04eb70c8f5868849a0ab7e9e30fe0ec60af4653309bf2141b855193b1df3e78ea87067fad3cf79e19df5b4206e757eafe89d1b30f4b0717e8660dac5c71c504b72643d021249ba0c1b4e95c658e2f0420d8bfa5c3c3da26fdf2f264851dd459d442d537e66f152b245dce64007065088b36b4c9c9961dbcb3c8ec93c58676f81372ce7b3da9a30970cefb96381845e9d5e00b04ddff6f0abc962eb50c1f47c37f84c4a1193a99f4cb4a1678b5f67e13dee3e8bbf00936ec1b7ae5e589f25f3edc3acd278e20c7f0d6f4536056ee02e7f438218c9eabb106267d592bc6318f6f61c3e4c09a2e808f967201d9bb38edb2f5a4d7e1de729900d76509d216632affe29f2b48eac7a4c8da79af0639081f4fdf1313d0001a29325594cfec95cf453779454447383c4b7ac23d3e864e256c34c7dd998a6bd3a27cc0324c7927af904dc0f625aaab3835af2d29733dbbd13bcda78e946c04a058e6a8b0039fcb6201639e6509b8ad35994883791bffa07b30822b33f96531b553707a57573bc16776dc49b498fccf7e985a3e9b5d46a7bfbcab5f0ea18d203046db1d054427b738de52bf6241e200d3bfdfd737a66111b64cf6acbd2f22baef609b04b33612a296fb7a70bc5ffb8cdedea37ff138aaf4ba70f434edca504d264b0e7fb3edb72d6e4243b9396e1357d90f6b44f04ba24e718660e3e1a3f4df0182b650ac162d7617a414aab0624960bcd4916f7dd0fe0e752efea073a862519074df7417277f23f81615077eeb01c9d51fda2229ca9f413b62f582db8ef0c241d047ff508fbc20c0d004bdb95f43917edc7b9259b8cba8538c2e6315c80ab991d8b5d9fc5c8cecc1bd57b4e993f91b20a0177e739a07f7b0d20333e357662f702b4e90c71d5cd19a98a484445107650797573916d4a692e497e66c15d0b907a5fe6455fe9874db2893a3c25166fd8c686bc47796b9fa909802173023e1a733d4d7fce9ba5b1836b042b306ca68544cc99988d0e4f461c8524635a48a01e0f2dddddc803f622458f79b458a87285d00dd6779a09eeaa8f6d2a9d4082d1e3faec79c32f52c1699bc65ae196d8cec85d1af78dcf099936a37bb485f8ad940649d2ed6f39932cd22e42b3657c4b6a4f6dceab46f3f3d09f2ee8dad8ac1584eb13bc815e3d6f5b1e5f6c265a64d7f6c027c191c2cf355ae6e15ad86cb60c9fc792b923fc720f24441a38dd2d0c99040b5d36ac9fb71df9256ea6bb7680147a647c99eac2671941ea6f6f0af62ad7dff14211187887677e292e034e761957663de2653fd35b07832d27de03409d40100c494b01ef33ac53752c296f45c503d552a20858103a399cac6d11689a6352b9a43717bdeaa9ed68a25320930411b4d6c98d9855206fd29993e53c54c69262b79bec1b450aa5729aaecc9978a4f4fb8963fa5cfd20898a552759f75d8aff301dbb7a6a8538076da126123be0e709414b9f0da878fb8985c2815574dc40e4784c4917edcdac81d09ceef7cc6a9b19dff29709a0bd8494f99d2a365fb1acff426727ce6d30d2c7bc7fbd60d36ff243a2fb1b1500b794a813a1e542628d1cc70e255624b21202d4136eac4b68beabd6f924619585ab3470cb7a4a48e2fad3fc85f150dca1f4ed576799d93fb507c66e8c06028c3b82e80f2ca0b1b7c7e531664c8557182f24e98ffb0225523590d93f011206881d4515985d3b11fd8285a72ff9e93e3f343b29621f7ba5f31caba37ff7c714a15cb9f0ef50250b2240becb57a26886e19ca7cac157b84df2b9523cca8270f68a366683c133add94388f4cbda7b9cc56c2f02a2302a98ccbb3b6ce6c44cc692fdcc17f517ff6c51612b66d622bb88d312fa22c8d94aac0fa9b342cd60f2a9ee85fc5efd01ca8c28c258eed91eb26d1feaef85754a03f2840759f21feb021a2a84bc948896bc74915bf33c63c816606cbbeb7c97ce2c9d83cd0bbcdd94ea7411f4609bfc44ecf51de2d1a9d61daa7f167db20b7899a618bdfab4629e5f9572c0b9ef305c39911197f63d8cda7ca21f399dcbde0b6a75f7ef89974b5d5ac78558ae9f17d7c0f35f0e6ed2872d4f75d0c3c2ba9e827195af2354b1ecd8f2356e6347284025d6f9684ece01c09c14e9d7d787e6dbb35bd2e5d8cc71100f6a78caebb86fd508816b40588eafa5c5a5625f44db29679ea91a1b05a9d099764e5c23e263ea52096d3999cb2970417545e9d6c55d9c0b1d02173913eca11498fc6e1ac9da42c0d9c319f36f33ed0fee3000ec6c76de1da8f105520b4e19a964582debff7e755dac3722d310e73438ffa3364faf10cf03a1d3e9508cfabe8fb0c813863713b3c69f18401577a02323533e0c79a1a40c3e675ba23c67d09b5a8cafb3dffe2a00f1034efb19e080f6469eeeca84d0b6a89f8ee672299695509828cd8e142fd972a2a5f4aab596742813fde7f94821e8c181a899811ed543940e59a174566d94c80f3496ba20ab0b341cfa35e675f94e95c2c47cadfad402f8c3a680e4eb0cc4d62920c7619ab577705a2298cd9e3901c21228a2b85dd2dcda14e984a5c92514c2faae2c4118ea68d748dd60a6e86eeb25e2b45ebea7bcb32b9e0a02ce89c9850f66ff20aa6e3f6349eff11ebb42da265add72aa1422ee6f25dc3c11929be6ee0060b51481c69cb20d45f16b9e40f0e1b6adb83bf9b8ce9eede49ab54fcf84bafdbee7e8b4e6e77da2b5906aa27e6bc53cfa05bd1c6507aa45749a08cc2cead910d02e3a831c693480fa73f84d4e10bfd1b7864db656f76d68251bf97c9a9efd57a980c4ea313fdc1c84296a7962099c923c0089b3e949d360296e6198acdb91185765f5b27168ef94f2e9157cd7f431b7c6d1994e8863d006f60a29a9302575386f76dc449647dfe5d4b9045caa760491742fbe596735d94d6bcafb97b72e280139f3a1d0f9258fe4cd733652c030fe473ea2eb56cdfe32c7af56512c341073395d21568f26d8eea831af47394b8d349ad95bce0c94e351591f7789fc55af9423ce1a0ff87e0665077b851a298e2999fbd46273e5e9e3de66c77b029c4b6cf042c8b48b9e8a29a253333433afa99461a35c6bfaa1b1214c9b2eca01205d4d128482bcfcd651ed4cd2386017c32bc3a876cc9061cbfaba8f5f6e3c9040efa7e84de40cebbf58412303c9195598ee563fcf326ed7bfa94a5665498a5bc77bb2e5a38faec709c4497506b9eee053b735db7d67e2e5a108ed2172d837be521dbd0f5111799a912527f80f03c2202a09b94aba06feae7cf903d80e1233055e380e75d448fb35e67353b640c24b361f5983c3ef1d71809a9d8fedc0c72dbaeaf21c792bd9a9e495f6c8c3acc8ee340755514f62f14eb7f861ab8cfb512ef44a8037abc5cbd6f89009a47f91c4b02714d715be096277f4c26b6c876bf918eff4152cfb493eb71332b28f1f234d13769cd179d6cfcd97b012e8f3c91f9e7e6e5da2049ab5eb6ab7d924aa3736c8c5222e1ace44052a9597ae8fc1400cf7700de2e334d5d3867d161ff42801324f6c2d864d2d8b34d5a50575c1542d25df8ecade527770266ebee74c8a9ebac8d8a393960e5cc249c30e784a9b7b58568b8b366727f9000160440461545150188cadd6f6afe9566ae1135029842049a53d7a30fcee99440b9bc58df063531702b8b26dd4325ba1778eb5b03c789744fbc8bc12c3ab0bd947b9cc3540bfdb593ce074e89865d57d03f5290b245af96c4bdf7c0a968bcff5108eeced1a3c57204500a9c0b5ff8466ac3890a84839c2c04e3c3e03cd131ec7aad0ccd6717a41c263acb6ed986d288cfad6e94529522ff86ba8b2a6b75de24891ea04eedad4196a7355156e31d84f079e38db69c3bf6d4ca0cb32a0a34b2ca32db25e3e95b6b2c3d14e6b06bf8d7dbda0b59100d241971ca09221907d34b38288545d524aa2b2d235a87808a36bac475a080c8a5eda64e24d346dadc050b6ce374305c72d3c2c54701bd2e44a801cce89bb72d7da6ae1ddcd5f1ebf02348ea3f2604406d745f20eb9fdb2eb0ba722a1d584aaa93bf90e27ed00bd8444559ac7904ba66110c86ddeec6c90cb66a2844e19e1b96bff349335b667de07c2223825a5f74ad67def50ce8d3413646624474c4178d85068dcbab0934202265859e2e06b34fbd68d45b167b5bea76944c852615cf16b541f026d3daba1389a6ac27ac061888f143aa83db96082e20b2004bec60fe00c2e710834fda9ec2912476dda167c8a218c7717162362db27004fe4024e6e601d7ec560e20da8f1a1ac16f92c3aeedc24185d34d22defd91f8daf54887ce1abf061c46347ee576af6266d67ecd7a8eba146b1d0d3ba5de2bd6256c91789717ab3d68174f4b677969d984f7945c10a6b55809ae483bcd3a22a3c3e0edd051ce4fb58185adb03a7a45788805d42e45dd39dce78550615d962780a14aaee36d1f94a0ca1ca9406d3364b2393121a751fc9a6e58f642dcdeb8add1273759c5d649ac567563e7752c7e172155790ca28a2451cbd186af98e09e06c9e53e9d86863de7cc77107e976d9d5924e3d84e792abff4eb67bb9e60719aa157cdd2a7471d5551c8bc4510fa87f3cbb5cc603d4bf7718df15109efd1011427ec140bf85c5f7f99f0965ee161a6270593aa580b15dada6f8cb1d8f0525d4d3fbaeb5915b5bfc34b812570453fddb6d60b9e5b9deed352ba8f246baaff8e0e2bffb25357a5f9be2093185b29665084f22f63b7f33ed35ea9c8769479476024230b561b47ce5322da00acaa0bd4c8b77b0e06ae0796c3cd2e5fe2e925cfc297b8d97d91a3efe0ea23a1c0b52e90ebf3ea7503f9bfe69ff2583b33048b4c0dfcd3bf869bab4cb19fc14bf7264bbb93fbe21299fad6d1d1e3b9b60551d917eb5915094dd9dd752d51b7798593d13c527a7126399f98ca00df1b76a64edd70edd6cf57df8cd5ef0916d912b9a1c9665908b2d22d327ad6bb66e56d1152c6415d560c817ad8c2c561f02a64ba0a5058df850db3bf690a5f57023481ecf7340739bea1e6c5e837e2e15a90c38f6467126a5eea7a25a11b3269858d2147f0ae97cf06f911b9dc142ed4c452359a44599d9a87840841f9ee14d2b4669dee52166acb9d159d357d52ea34abc9a1dd9bf4285921e6bcb31dd20fff5fcdd03661925c2434b7577f50e925a72f5f0ba832141142072204df767722d4a976f4abefe9365cfc3c821a709d331cf2d452ce0bbe010372cd7a285cb5bc5f673e0ae9cc53feaff91e1ef404e07f58a9d904724b816b9db2bdc55b0b25d08e558174e8675fe2d3ef1558f8ec05d5583d2760d4d7bf86ed99d00ed596bddac06f08e9e299fdf455f3fb55b13bbaa0511bb94beb758eb996b32098635da90bb0a37c90d863b83942437e2fdd6cf0b130f2097eba7678cc88b37de8134cd2c214ad6a5ff6e36376cfaeaaf6eeac790b6e91b6086d684c79f64370ec9ad30d5bbb587bfbae18e02d8b053972aa76fd5c79345e32d713e51cc3a8594f303e7d9ca79a3132e58433f235b0309ca12228f6348e9159053baa201a95555b240a281299a4c9ceb8879da55bdead590022fa898c1039e640dd095b775ac0797b7f66e0d2968f340773672b21e8d9d8f4b90a577d12e02edd560181c52fef347e82a3b18873b2efd0b27836db94c198f85bee3ad4fad6914ef98bc00db1f3907f1d3162f8662a3a93fd6937fcd060887974f5d718216ae44037b8482099f9b66b862e801770a3ee4027717632097c868e0b2d539f484a7d433abc058e32dd0d2232b597a912f9bfb1a1e9631ace611e35e18715e619a1a0a6d61f0f8e1b58499da8b615bebe06c6aee8b2e4463f97824f43fe05814d15681b99dc7d69d96c4112893008e1db11b421e3c9031695a0898b44ee1808e68f704710c762fe10806495a11aba9fe6de644801bfd1df62f6ab8369de7bbc31a1a90c873021805f64e1425af525a762faf179c3a8f086fd6c1003ad731989a48e52a561c0a1705f8121db051605398f84e33b2ce65d8859497051d9920421e193a734824c11e2f6501f4e14a7e1371dd73a10cc65360032633e6b669f71265cc48681b9f6265a6c741b6d57675579af598960431b93c65b3cb8f9c57031e11510e6db01e26fe08faf68eb62a749c19f1f25d51589d8465d815e82fa67842a5940c56f7ef503c484610f5125ea5e752d8bd388dd382c8ac623cafbaa8ad493f789279f88a76d6e73d93aaec73206823d8e95f8103d2e2c91328ce2c7113515f0ac1c6e0133aa3ec0de22a9b18c6849bacb0c068b508c423fa1725c2b96216dc0f05e34bf25a99ed151e880b5b739e105ecd0252043821c7ee868474a3ab52120207301bd8f47405e9d199c2684c3ed24a12c7822aa1d017dfca98063128949e7ed41d0bb2a9ad47b8c299d5a1aa738cee110ebd410770e61ab2d9b81aa20c47361e47d9e9ec02287383267ea81d05d477c54520371b04ded6b3a9380597e0314c407209ff391e7b2835751285f9bdb246aaac4f0dcde0a13cd857802690117d181220ea2e585fc6a9ed74b5d619ef6cb806513b607bfa943674ec8bd67fdb40b69c05348552ace455738aec62064596f640451550b1113e1fa8bb050f5f390db12cc71c480116af6414146ce7d54986b68fac07e785aebb54af4a25c6587dd5ed2f7d46252067e0c49645001bf98330d4b2e4e913f9c9bcd83daa783665a03c1cf6d7547dc1b49ece3ed60bda26700477ac5455127827d9023aecb23041faed7ce6054b4ebe9e4cfc7704e1bef5e2d804d6cfae7c0f5ff75e121f1051f99d6f784355a4b70e772cbdc1b3264042540e61ce8f1265631e00778ade0c1ab3b8ed086edf009d89a29ccd5ea5c80b90d74143fd39b8140c19f51cd66e0f9182a5ef027a78dc4731e8e193560803ce282e87ed572cd6e7047cc08beacd2601b17b908040f0454724ab4c29461fb0e41bc109309908511b7511becd3f55de2db0e81b469484fdf3615b88967a5123979f980bbc1cd4dd53827293596066b059d283f114babec7e09f5e044c6e37f1817de64356a7a1c298f594d3eb86e0ca547853a829bb6c6eb3451afa4295665fee6f7b3b327e0c9f1b1ce5ff06ffdf88e42d54c3a082e2903eb7e42b01020d9f0d702c8afef76b46ed9386533652323dfddf63c059fcb3b2c2f070665d237271da876f1ca9a7404af934ed38195087078579f4b351dbbe9b5d3e21179faafeb759d95ee7ab1c390d7b1d6db62864f431c47d7e3a51a9b449890c777f275831dd391196c2dd667ddb4198f537d79899261488fce58a6f140cace988de804e831f642d0d453ae6ddbd03cd09253307b69311ee321529ea89cec296e41f66ed7e3d7512925bd1556a0ea2f54ef7927eab179e992ec98bb65a3bb82366513f0baac5","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"bdb79e3b0432a41bc4f5117424f3d0f8"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
